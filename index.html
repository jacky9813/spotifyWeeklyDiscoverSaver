<!DOCTYPE html>
<html>
    <head>
        <title>Spotify Weekly Discover Saver</title>
        <script src="scripts/date.format.js"></script>
        <script src="scripts/app.js"></script>
    </head>
    <body>
        Playlist Name: <input type="text" name="playlistName" id="playlistName" /><br>
        <button onclick="dumpWD()">Dump</button>
        <script>
            document.getElementById("playlistName").value = "WeeklyDiscover" + (new Date()).format("Y_W");
            function dumpWD(){
                app.spotify.authorize(function(){
                    // Get playlist ID
                    app.spotify.findPlaylist("Discover Weekly").then(function(playlistDetail){
                        // Get playlist Tracks
                        app.spotify.getPlaylistTracks(playlistDetail.id).then(function(playlistTracks){
                            // Create a new playlist
                            app.spotify.newPlaylist(document.getElementById("playlistName").value,playlistTracks.map(el=>el.uri))
                        })
                    })
                })
            }
        </script>
    </body>
</html>